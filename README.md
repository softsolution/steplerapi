# Step-ler.ru API
Описание API сервиса поиска работы, размещения вакансий Step-ler.ru

### Авторизация
Все запросы к API подписываются ключом доступа, который предоставляет партнерам по запросу. Ключ API может передаваться как в POST/GET параметре, так и в заголовке запроса с именем api_key. Длина ключа может быть не более 32 символов. 

### Синтаксис запроса
Чтобы обратиться к любому методу API (за исключением метода execute, о нём ниже), вам необходимо выполнить POST или GET запрос такого вида: 

> https://step-ler.ru/api/method/METHOD_NAME?PARAMETERS&api_key=API_KEY

Он состоит из нескольких частей: 
* METHOD_NAME (обязательно) — название метода API, к которому Вы хотите обратиться.
* PARAMETERS (опционально) — входные параметры соответствующего метода API, последовательность пар name=value, разделенных амперсандом. Список параметров указан на странице с описанием метода. Значения параметров должны быть в кодировке UTF-8.
* API_KEY — ключ доступа.
Параметры могут передаваться как методом GET, так и POST. Если вы будете передавать большие данные (больше 2 килобайт), следует использовать POST. 

Обратите внимание, ответы возвращаются только в формате JSON.

### Разбивка на страницы
В ответах, где отдаётся список чего-либо с возможностью разбивки на страницы, присутствует объект paging, содержащий ячейки: 
* has_next (true или false) - флаг наличия следующей страницы;
* page - номер текущей страницы;
* per_page - количество элементов на одну страницу.

### Определение IP адреса посетителя
В случае, если запросы к api выполняются из одного места, например из скрипта PHP на сервере, но при этом необходимо, чтобы ip адрес посетителей учитывался в API, вы можете передавать ip адрес в параметре запроса с названием ip, например: 
> https://step-ler.ru/api/method/METHOD_NAME?PARAMETERS&api_key=API_KEY&ip=8.8.8.8

### Обработка ошибок
На все запросы к методам step-ler.ru/api/method/ и step-ler.ru/api/execute/, включая запросы с ошибками возвращают HTTP CODE 200.
Ошибки генерируются в JSON ответе специальным образом: 

```json
{  
    "error":{
       "error_code":101,
       "error_msg":"Неверный ключ доступа",
       "request_params":[  ]
    }
}
```

<a name="errors"></a>
Коды ошибок (error_code) совпадают в своем большинстве с кодами ошибок Вконтакте. 
В ячейке error_msg указывается текстовое представление ошибки на выбранном языке. В некоторых сообщениях об ошибках присутствует непустое поле request_params с массивом названий параметров и ошибками их валидации.

| Код | Описание |
|----|----|
| 1   | Произошла неизвестная ошибка |
| 2   | Ключ доступа выключен | 
| 3   | Передан неизвестный метод | 
| 5   | Авторизация пользователя не удалась | 
| 7   | Нет прав для выполнения этого действия | 
| 71  | Требуется авторизация пользователя | 
| 710 | Требуется административный доступ | 
| 8   | Неверный запрос | 
| 15  | Доступ запрещён | 
| 115 | Параметр sig не передан или является некорректным | 
| 23  | Метод был выключен | 
| 24  | Метод вам недоступен | 
| 100 | Один из необходимых параметров был не передан или неверен | 
| 101 | Неверный ключ доступа | 
| 115 | Параметр sig не передан или является некорректным | 
| 777 | ip адрес посетителя передан некорректный | 

### Авторизация и регистрация

| Название | Описание |
|----|----|
| [auth.signup_fields](auth/signup_fields.md) | Получает имена полей, обязательных для регистрации. |
| [auth.signup](auth/signup.md) 	| Регистрирует нового пользователя. |
| [auth.confirm](auth/confirm.md) 	| Завершает регистрацию нового пользователя, начатую методом auth.signup. |
| [auth.restore](auth/restore.md) 	| Отправка запроса на восстановление пароля пользователя. |
| [auth.login](auth/login.md) 	| Авторизация пользователя стандартным способом (используются cookie). |
| [auth.logout](auth/logout.md) 	| Разавторизация пользователя. |

